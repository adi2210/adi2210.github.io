<!DOCTYPE html>
<html>
<head>
  <title>Compose</title>
  <meta charset="UTF-8">
  
  <link rel="stylesheet" href="css/bootstrap.min.css"/>
  <link rel="stylesheet" href="css/font-awesome.min.css"/>
  <link rel="stylesheet" href="css/themify-icons.css"/>
  <link rel="stylesheet" href="css/accordion.css"/>
  <link rel="stylesheet" href="css/owl.carousel.min.css"/>

  
  <link rel="stylesheet" href="css/style.css"/>
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,700,900' rel='stylesheet' type='text/css'>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
  <script type="text/javascript" src="paper-full.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/howler/1.1.28/howler.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script type="text/paperscript" canvas="myCanvas">
    var li = "";

    var keyData = {
      q: {
        sound: new Howl({
          urls: ['sounds/bubbles.mp3']
        }),
        color: '#1abc9c',
        value: 'q'
      },
      w: {
        sound: new Howl({
          urls: ['sounds/clay.mp3']
        }),
        color: '#2ecc71',
        value: 'w'
      },
      e: {
        sound: new Howl({
          urls: ['sounds/confetti.mp3']
        }),
        color: '#3498db',
        value : 'e'
      },
      r: {
        sound: new Howl({
          urls: ['sounds/corona.mp3']
        }),
        color: '#9b59b6',
        value : 'r'
      },
        t: {
        sound: new Howl({
          urls: ['sounds/dotted-spiral.mp3']
        }),
        color: '#34495e',
        value : 't'
      },
      y: {
        sound: new Howl({
          urls: ['sounds/flash-1.mp3']
        }),
        color: '#16a085',
        value : 'y'
      },
      u: {
        sound: new Howl({
          urls: ['sounds/flash-2.mp3']
        }),
        color: '#27ae60',
        value : 'u'
      },
      i: {
        sound: new Howl({
          urls: ['sounds/flash-3.mp3']
        }),
        color: '#2980b9',
        value : 'i'
      },
      o: {
        sound: new Howl({
          urls: ['sounds/glimmer.mp3']
        }),
        color: '#8e44ad',
        value : 'o'
      },
      p: {
        sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: '#2c3e50',
        value : 'p'
      },
      a: {
        sound: new Howl({
          urls: ['sounds/pinwheel.mp3']
        }),
        color: '#f1c40f',
        value : 'a'
      },
      s: {
        sound: new Howl({
          urls: ['sounds/piston-1.mp3']
        }),
        color: '#e67e22',
        value : 's'
      },
        d: {
        sound: new Howl({
          urls: ['sounds/piston-2.mp3']
        }),
        color: '#e74c3c',
        value : 'd'
      },
      f: {
        sound: new Howl({
          urls: ['sounds/prism-1.mp3']
        }),
        color: '#95a5a6',
        value : 'f'
      },
      g: {
        sound: new Howl({
          urls: ['sounds/prism-2.mp3']
        }),
        color: '#f39c12',
        value : 'g'
      },
      h: {
        sound: new Howl({
          urls: ['sounds/prism-3.mp3']
        }),
        color: '#d35400',
        value : 'h'
      },
      j: {
        sound: new Howl({
          urls: ['sounds/splits.mp3']
        }),
        color: '#1abc9c',
        value : 'j'
      },
      k: {
        sound: new Howl({
          urls: ['sounds/squiggle.mp3']
        }),
        color: '#2ecc71',
        value : 'k'
      },
      l: {
        sound: new Howl({
          urls: ['sounds/strike.mp3']
        }),
        color: '#3498db',
        value : 'l'
      },
      z: {
        sound: new Howl({
          urls: ['sounds/suspension.mp3']
        }),
        color: '#9b59b6',
        value : 'z'
      },
      x: {
        sound: new Howl({
          urls: ['sounds/timer.mp3']
        }),
        color: '#34495e',
        value : 'x'
      },
      c: {
        sound: new Howl({
          urls: ['sounds/ufo.mp3']
        }),
        color: '#16a085',
        value : 'c'
      },
      v: {
        sound: new Howl({
          urls: ['sounds/veil.mp3']
        }),
        color: '#27ae60',
        value : 'v'
      },
      b: {
        sound: new Howl({
          urls: ['sounds/wipe.mp3']
        }),
        color: '#2980b9',
        value : 'b'
      },
      n: {
        sound: new Howl({
          urls: ['sounds/zig-zag.mp3']
        }),
        color: '#8e44ad',
        value : 'n'
      },
      m: {
        sound: new Howl({
          urls: ['sounds/piston-3.mp3']
        }),
        color: '#2c3e50'
        ,
        value : 'm'
      },
      space: {
        sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: 'black'
        ,
        value : ' '
      },
      
        backspace:{
      sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: 'black'
        ,
        value : '-'
        },
        delete:{
      sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: 'black'
        ,
        value : '-'
        },
        enter:{
      sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: 'black'
        ,
        value : '+'
        },
        '.' :{
      sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: 'black'
        ,
        value : '.'
        },
        ',' :{
      sound: new Howl({
          urls: ['sounds/moon.mp3']
        }),
        color: 'black'
        ,
        value : ','
        }
      }

    var circles = [];

    function onKeyDown(event) {
      if(keyData[event.key]){
        var maxPoint = new Point(view.size.width, view.size.height);
        var randomPoint = Point.random();
        var point = maxPoint * randomPoint;
        var newCircle = new Path.Circle(point, 500)
        newCircle.fillColor = keyData[event.key].color;
        keyData[event.key].sound.play();
        circles.push(newCircle);

        if(keyData[event.key].value=='+')
        li=li+" \r\n";
        else if(keyData[event.key].value!='-')
        li=li+(keyData[event.key].value);
        else if(keyData[event.key].value=='-')
        li=li.substring(0,li.length-1);
        
        document.getElementById("ml2").innerHTML=li;
      }
    }

    function onFrame(event){
      for(var i = 0; i < circles.length; i++){
        circles[i].scale(0.9);
        circles[i].fillColor.hue += 1;
        if(circles[i].area < 1){
          circles[i].remove();
          circles.splice(i, 1);
          console.log(circles);
        }
      }
    }
</script>
<script >
var ml = { timelines: {}};
</script>
<script>
    function play(){
       var audio1 = document.getElementById("sound1");
      
      audio1.play();
    }
    function p(){
       var audio1 = document.getElementById("sound1");
      
      audio1.pause();
      audio1.currentTime=0;
    }

    function play1(){
       
       var audio2 = document.getElementById("sound2");
              audio2.play();
  
    }
    function p1(){
       var audio2 = document.getElementById("sound2");
      
      audio2.pause();
      audio2.currentTime=0;
    }

    function play2(){
       
       var audio3 = document.getElementById("sound3");
              audio3.play();
  
    }
    function p2(){
       var audio3 = document.getElementById("sound3");
      
      audio3.pause();
      audio3.currentTime=0;
    }

    function play3(){
       
       var audio4 = document.getElementById("sound4");
              audio4.play();
  
    }
    function p3(){
       var audio4 = document.getElementById("sound4");
      
      audio4.pause();
      audio4.currentTime=0;
    }

    function play4(){
       
       var audio5 = document.getElementById("sound5");
              audio5.play();
  
    }
    function p4(){
       var audio5 = document.getElementById("sound5");
      
      audio5.pause();
      audio5.currentTime=0;
    }

    function play5(){
       
       var audio6 = document.getElementById("sound6");
              audio6.play();
  
    }
    function p5(){
       var audio6 = document.getElementById("sound6");
      
      audio6.pause();
      audio6.currentTime=0;
    }
    function play6(){
       
       var audio7 = document.getElementById("sound7");
              audio7.play();
  
    }
    function p6(){
       var audio7 = document.getElementById("sound7");
      
      audio7.pause();
      audio7.currentTime=0;
    }
    function play7(){
       
       var audio8 = document.getElementById("sound8");
              audio8.play();
  
    }
    function p7(){
       var audio8 = document.getElementById("sound8");
      
      audio8.pause();
      audio8.currentTime=0;
    }
    function play8(){
       
       var audio9 = document.getElementById("sound9");
              audio9.play();
  
    }
    function p8(){
       var audio9 = document.getElementById("sound9");
      
      audio9.pause();
      audio9.currentTime=0;
    }
   </script>
  <style>
  body {
    font: 13px "Source Sans Pro", Arial, Helvetica, sans-serif;
    background-color: #e8c3b9;
    color: #fff;
    text-align: center;
  }

  .moving-letters {
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    margin: auto;
    height: 200px;
  }


  </style>
</head>
<body >
  <div id="preloder">
    <div class="loader"></div>
  </div>

  
  <div class="menu-wrapper">
    <div class="menu-switch" onmouseover="play4()" onmouseout="p4()">
      <audio id="sound5" src="menu.mp3" ></audio>
      <i class="ti-menu"></i>
    </div>
  </div>
  <div class="side-menu-wrapper">
    <div class="sm-header">
      <div class="menu-close"  onmouseover="play5()" onmouseout="p5()">
        <audio id="sound6" src="back.mp3" ></audio>
        <i class="ti-arrow-left"></i>
      </div>
      <a href="index.html" class="site-logo">
        <h3>LEARNING</h3>
      </a>
    </div>
    <nav class="main-menu">
      <ul>
        <li><a href="index.html" onmouseover="play()" onmouseout="p()">HOME</a>
          <audio id="sound1" src="home page.mp3" ></audio>
        </li>
        <li><a href="alpha.html" onmouseover="play1()" onmouseout="p1()">ALPHABET</a>
          <audio id="sound2" src="Alphabet.mp3" ></audio>
        </li>
        <li><a href="circles.html" onmouseover="play2()" onmouseout="p2()">MUSIC</a>
          <audio id="sound3" src="Music.mp3" ></audio>
        </li>
        <li><a href="text.html" class="active" onmouseover="play3()"  onmouseout="p3()">COMPOSE</a>
          <audio id="sound4" src="composition.mp3" ></audio>
        </li>
      </ul>
    </nav>
  </div>
  <section class="hero-section">
  <div class="moving-letters">
    <h1 class="ml2" id="ml2" >Create your own composition</h1>
    <canvas id="myCanvas"></canvas>
    <div id="controls">
     <button id="saveButton" style="background-color: black; width: 30%; height: 40px" onclick="Myfunction()" onmouseover="play6()"  onmouseout="p6()" >Save
      <audio id="sound7" src="save.mp3" ></audio>
     </button>
     <button id="clearButton" style="background-color: black; width: 30%; height: 40px" onclick="Myfunction2()" onmouseover="play7()"  onmouseout="p7()" >Clear
      <audio id="sound8" src="clear.mp3" ></audio>
     </button>
    </div>
    <p><strong>Files:</strong></p>
    <ol id="fileList"></ol>

    <script src="https://raw.githubusercontent.com/eligery/FileSaver.js/master/FileSaver.js"></script>
    <script>
      function Myfunction(){
        
        var text=document.getElementById("ml2").innerHTML;
        var textblob= new Blob([text],{type: 'text/plain'});

        var url = URL.createObjectURL(textblob);
        var lis = document.createElement('li');
        var link = document.createElement('a');

        var filename = new Date().toISOString();

        link.href = url;
        link.download = filename+".txt"; 
        link.innerHTML = "<a onmouseover='play8()' onmouseout='p8()'> Save to disk</a><audio id='sound9' src='download.mp3' ></audio>";
        link.onclick= destroyclick;
  
  
        lis.appendChild(document.createTextNode(filename+".txt  "))

        lis.appendChild(link);
        fileList.appendChild(lis);


        }
    function destroyclick(event){
      fileList.removeChild(event.target);
      }
      function Myfunction2(){
        location.reload();
      }
    </script>


<script>




$('.ml2').each(function(){
  $(this).html($(this).text().replace(/([^\x00-\x80]|\w)/g, "<span class='letter'>$&</span>"));
});

ml.timelines["ml2"] = anime.timeline({loop: true})
  .add({
    targets: '.ml2 .letter',
    scale: [4,1],
    opacity: [0,1],
    translateZ: 0,
    easing: "easeOutExpo",
    duration: 950,
    delay: function(el, i) {
      return 70*i;
    }
  }).add({
    targets: '.ml2',
    opacity: 1,
    duration: 1000,
    easing: "easeOutExpo",
    delay: 1000
  });
</script>

<style>
.ml2 {
  font-weight: 900;
  font-size: 3.5em;
}

.ml2 .letter {
  display: inline-block;
  line-height: 1em;
}
</style>


  </div>
</section>

<script src="js/vendor/jquery-3.2.1.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/imagesloaded.pkgd.min.js"></script>
  <script src="js/isotope.pkgd.min.js"></script>
  <script src="js/jquery.nicescroll.min.js"></script>
  <script src="js/circle-progress.min.js"></script>
  <script src="js/pana-accordion.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
